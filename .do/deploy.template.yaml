# DigitalOcean App Platform Deploy Template
# This template is used for the "Deploy to DigitalOcean" button
# Users can customize before deploying

spec:
  name: clinicconnect
  region: nyc
  
  services:
    - name: web
      github:
        repo: lacson1/clinicconnect
        branch: main
        deploy_on_push: true
      dockerfile_path: Dockerfile.optimized
      http_port: 5001
      instance_count: 1
      instance_size_slug: basic-xxs
      
      health_check:
        http_path: /api/health
        initial_delay_seconds: 30
      
      envs:
        - key: NODE_ENV
          value: production
        - key: DATABASE_URL
          scope: RUN_TIME
          value: ${db.DATABASE_URL}
        - key: SESSION_SECRET
          scope: RUN_TIME
          type: SECRET
      
      routes:
        - path: /
  
  databases:
    - name: db
      engine: PG
      version: "16"
      size: db-s-dev-database

